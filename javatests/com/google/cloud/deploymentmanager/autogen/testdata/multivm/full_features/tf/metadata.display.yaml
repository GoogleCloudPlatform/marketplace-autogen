apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: marketplace-tools-display
  annotations:
    autogenSpecType: MULTI_VM
    config.kubernetes.io/local-config: "true"
spec:
  ui:
    input:
      variables:
        project_id:
          name: project_id
          title: Project Id
          invisible: true
        goog_cm_deployment_name:
          name: goog_cm_deployment_name
          title: Goog Cm Deployment Name
        zone:
          name: zone
          title: Zone
          subtext: 'GPU availability is limited to certain zones. <a href="https://cloud.google.com/compute/docs/gpus">Learn more</a>'
          xGoogleProperty:
            type: ET_GCE_ZONE
            gceZone:
              allowlistedZones:
              - us-east4-a
              allowlistedRegions:
              - europe-west1
        domain:
          name: domain
          title: Domain
          subtext: Your domain
          placeholder: mydomain.com
          regexValidation: '[a-zA-Z0-9-]+.[a-z]{2,}'
          validation: A valid domain has to be entered
        adminEmailAddress:
          name: adminEmailAddress
          title: Administrator e-mail address
          tooltip: The e-mail address used to create the administrator account for WordPress.
          placeholder: user@example.com
          regexValidation: ^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-.]+$
          validation: Please enter a valid email address
          xGoogleProperty:
            type: ET_EMAIL_ADDRESS
        optionalEmailAddress:
          name: optionalEmailAddress
          title: Optional e-mail address
          placeholder: user@example.com
          validation: Please enter a valid email address
          xGoogleProperty:
            type: ET_EMAIL_ADDRESS
        showConditionals:
          name: showConditionals
          title: Show conditional values
        generateOptionalPassword:
          name: generateOptionalPassword
          title: Generate optional password
        tier2LocalSSDs:
          name: tier2LocalSSDs
          title: Tier 2 - local SSDs
          min: 0
          max: 5
        superExtraDiskName:
          name: superExtraDiskName
          title: Super-extra disk name
        imageCaching:
          name: imageCaching
          title: Image caching
          level: 1
          enumValueLabels:
            - label: Not cached
              value: none
            - label: Cached with redis
              value: redis
            - label: Cached with memcached
              value: memcached
        imageCompression:
          name: imageCompression
          title: Enable compression
          level: 1
          booleanGroup: IMAGE_CACHING_OPTIONS
        imageSizing:
          name: imageSizing
          title: Dynamic sizing
          level: 1
          booleanGroup: IMAGE_CACHING_OPTIONS
        extraLbZone0:
          name: extraLbZone0
          title: Zone
          level: 1
          section: LOAD_BALANCERS
          xGoogleProperty:
            type: ET_GCE_ZONE
        extraLbZone1:
          name: extraLbZone1
          title: Zone
          level: 1
          section: LOAD_BALANCERS
          xGoogleProperty:
            type: ET_GCE_ZONE
        enable_cloud_logging:
          name: enable_cloud_logging
          title: Enable Cloud Logging
          tooltip: 'Cloud Logging allows you to store, search, analyze, monitor, and alert on log data and events. <a href="https://cloud.google.com/logging/">Learn more</a>'
          section: google_cloud_operations
        enable_cloud_monitoring:
          name: enable_cloud_monitoring
          title: Enable Cloud Monitoring
          tooltip: 'Cloud Monitoring provides visibility into the performance, uptime, and overall health of cloud-powered applications. <a href="https://cloud.google.com/monitoring/">Learn more</a>'
          section: google_cloud_operations
        main_instance_count:
          name: main_instance_count
          title: Instance Count
          tooltip: Specify a value between 1 and 10.
          subtext: A custom description for instance count.
          section: main_tier
          min: 1
          max: 10
        tier2_instance_count:
          name: tier2_instance_count
          title: Instance Count
          section: tier2_tier
          enumValueLabels:
            - label: "1"
              value: "1"
            - label: "2"
              value: "2"
            - label: "4"
              value: "4"
        tier3_instance_count:
          name: tier3_instance_count
          title: Instance Count
          tooltip: Specify a value between 1 and 10.
          section: tier3_tier
          min: 1
          max: 10
      sections:
        - name: main_tier
          title: Main Tier
        - name: tier2_tier
          title: Secondary Tier
        - name: tier3_tier
          title: Third Tier
        - name: LOAD_BALANCERS
          title: Additional zones for load balancers
        - name: google_cloud_operations
          title: Google Cloud Operations
          subtext: Monitoring and management for services, containers, applications, and infrastructure
    runtime:
      suggestedActions:
        - heading: Conditional step
          description: This step is displayed conditionally. Unselect the checkbox to hide it.
          snippet: e^(i * pi) + 1 = 0
        - heading: Conditional step - negation
          description: This step is displayed conditionally. Select the checkbox to hide it.
          snippet: a^2 + b^2 = c^2
        - heading: External IP action
          description: Some action
        - heading: Internal IP action
          description: Some action
